<!DOCTYPE html>
<html>
    <head>
        <title>SWIPE TEST</title>
        <style>
            body {
              background-color: #f2f2f2;
            }

            button {
              width: 180px;
              height: 60px;
            }

            #button--open {
              position: absolute;
              left: 40%;
              top: 20%;
            }

            .menu {
              position: absolute;
              left: -400px;
              top: 0;
              bottom: 0;
              width: 400px;
              background-color: #e5f2ff;
              border-style: solid;
              border-color: #999;
              border-width: 1px;
              z-index: 1;
              -webkit-transition: all 0.3s;
              -moz-transition: all 0.3s;
              -ms-transition: all 0.3s;
              -o-transition: all 0.3s;
              transition: all 0.3s;
            }

            .menu--open {
              left: 0;
            }

            .overlay {
              position: absolute;
              left: 0;
              top: 0;
              bottom: 0;
              right: 0;
              visibility: hidden;
              z-index: 2;
            }

        </style>
    </head>
    <body>
        <div id="overlay--full" class="overlay"></div>

        <div class="menu">
            <img src="http://expertintegratedsystemsblog.com/wp-content/uploads/2014/08/3image1-300x190.jpg"/>
            <br/><br/>
            <button>I am clickable</button>
        </div>
        
        <button id="button--open">OPEN MENU</button>

        <script>
            // http://www.javascriptkit.com/javatutors/touchevents2.shtml
            window.addEventListener("load", function() {
                var overlay = document.getElementById("overlay--full"),
                    swipeThreshold = 60,
                    clickThreshold = 10,
                    swipeDuration = 400,
                    clickDuration = 200,
                    startX, endX, startTime, endTime;

                function openMenu() {
                    var menu = document.getElementsByClassName("menu")[0];
                    menu.classList.add("menu--open");
                    var overlays = document.getElementsByClassName("overlay");
                    for (i = 0; i < overlays.length; i++) {
                        overlays[i].style.visibility = "visible";
                    }
                    
                }

                function closeMenu() {
                    var menu = document.getElementsByClassName("menu")[0];
                    menu.classList.remove("menu--open");
                    var overlays = document.getElementsByClassName("overlay");
                    for (i = 0; i < overlays.length; i++) {
                        overlays[i].style.visibility = "hidden";
                    }
                }

                document.getElementById("button--open").addEventListener("click", openMenu, false);

                overlay.addEventListener("touchstart", function(e) {
                    startX = e.changedTouches[0].pageX;
                    startTime = new Date().getTime();
                }, false);

                overlay.addEventListener("touchend", function(e) {
                    endX = e.changedTouches[0].pageX;
                    endTime = new Date().getTime();
                    if (endTime - startTime < swipeDuration && swipeThreshold < startX - endX) closeMenu();
                    if (endTime - startTime < clickDuration && 450 < startX && Math.abs(startX - endX) < clickThreshold) closeMenu();
                    e.preventDefault();
                }, false);

            }, false);

        </script>
    </body>
</html>
